{{define "title"}}Admin{{end}}

{{define "content"}}
<div class="page-header">
    <h1>Links</h1>
    <a href="/admin/links/new" class="btn btn-primary">New link</a>
</div>

<div class="dash-grid">
    <div class="dash-stats">
        <div class="dash-stat">
            <span class="dash-stat-label">Active links</span>
            <span class="dash-stat-number mono">{{formatNum .TotalLinks}}</span>
        </div>
        <div class="dash-stat">
            <span class="dash-stat-label">Today</span>
            <span class="dash-stat-number mono">{{formatNum .ClicksToday}}</span>
        </div>
        <div class="dash-stat">
            <span class="dash-stat-label">Total clicks</span>
            <span class="dash-stat-number mono">{{formatNum .ClicksAllTime}}</span>
        </div>
    </div>
    <div class="dash-referrers">
        <h2 class="card-title">Top referrers</h2>
        {{if .TopReferrers}}
        <div class="al-rows">
            {{range .TopReferrers}}
            <div class="al-row">
                <span class="al-row-label mono">{{.Domain}}</span>
                <span class="al-row-count mono">{{formatNum .Count}}</span>
            </div>
            {{end}}
        </div>
        {{else}}
        <p class="empty-state">No referrer data yet.</p>
        {{end}}
    </div>
</div>

<div class="search-bar">
    <input
        type="search"
        name="search"
        class="input search-input"
        placeholder="Search links..."
        value="{{.Search}}"
        hx-get="/admin"
        hx-trigger="input changed delay:300ms, search"
        hx-target="#link-cards"
        hx-push-url="true"
        hx-include="this"
    >
</div>

<div id="link-cards">
    {{template "cards" .}}
</div>
{{end}}
