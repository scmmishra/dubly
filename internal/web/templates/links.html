{{define "title"}}Admin{{end}}

{{define "content"}}
<div class="page-header">
    <h1>Links</h1>
    <a href="/admin/links/new" class="btn btn-primary">New link</a>
</div>

<div class="al-hero">
    <div class="al-hero-stat">
        <span class="al-hero-number mono">{{formatNum .TotalLinks}}</span>
        <span class="al-hero-label">Active links</span>
    </div>
    <div class="al-hero-stat">
        <span class="al-hero-number mono">{{formatNum .ClicksToday}}</span>
        <span class="al-hero-label">Today</span>
    </div>
    <div class="al-hero-stat">
        <span class="al-hero-number mono">{{formatNum .ClicksAllTime}}</span>
        <span class="al-hero-label">Total clicks</span>
    </div>
</div>

{{if .TopReferrers}}
<div class="card al-breakdown" style="margin-bottom: 1.5rem;">
    <h2 class="card-title">Top referrers</h2>
    <div class="al-rows">
        {{range .TopReferrers}}
        <div class="al-row">
            <span class="al-row-label mono">{{.Domain}}</span>
            <span class="al-row-count mono">{{formatNum .Count}}</span>
        </div>
        {{end}}
    </div>
</div>
{{end}}

<div class="search-bar">
    <input
        type="search"
        name="search"
        class="input search-input"
        placeholder="Search links..."
        value="{{.Search}}"
        hx-get="/admin"
        hx-trigger="input changed delay:300ms, search"
        hx-target="#link-cards"
        hx-push-url="true"
        hx-include="this"
    >
</div>

<div id="link-cards">
    {{template "cards" .}}
</div>
{{end}}
