{{define "title"}}Dashboard{{end}}

{{define "content"}}
<div class="page-header">
    <h1>Dashboard</h1>
    <a href="/admin/links/new" class="btn btn-primary">New link</a>
</div>

<div class="stat-grid">
    <div class="stat-card">
        <div class="stat-label">Active links</div>
        <div class="stat-value mono">{{formatNum .TotalLinks}}</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">Clicks today</div>
        <div class="stat-value mono">{{formatNum .ClicksToday}}</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">Total clicks</div>
        <div class="stat-value mono">{{formatNum .ClicksAllTime}}</div>
    </div>
</div>

<div class="dashboard-grid">
    <div class="card">
        <h2 class="card-title">Top links</h2>
        {{if .TopLinks}}
        <table class="table-mini">
            <tbody>
                {{range .TopLinks}}
                <tr>
                    <td>
                        <a href="/admin/links/{{.Link.ID}}/analytics" class="mono link-url">{{.Link.ShortURL}}</a>
                        {{if .Link.Title}}<span class="text-muted"> â€” {{truncate .Link.Title 30}}</span>{{end}}
                    </td>
                    <td class="text-right mono">{{formatNum .ClickCount}}</td>
                </tr>
                {{end}}
            </tbody>
        </table>
        {{else}}
        <p class="empty-state">No links yet. <a href="/admin/links/new">Create one</a>.</p>
        {{end}}
    </div>

    <div class="card">
        <h2 class="card-title">Top referrers</h2>
        {{if .TopReferrers}}
        <table class="table-mini">
            <tbody>
                {{range .TopReferrers}}
                <tr>
                    <td class="mono">{{.Domain}}</td>
                    <td class="text-right mono">{{formatNum .Count}}</td>
                </tr>
                {{end}}
            </tbody>
        </table>
        {{else}}
        <p class="empty-state">No referrer data yet.</p>
        {{end}}
    </div>
</div>
{{end}}
